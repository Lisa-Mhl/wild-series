{% extends 'base.html.twig' %}

{% block title %}Episode{% endblock %}

{% block body %}

    <div class="card bg-transparent">
        <div class="card-body">
            <h3 class="card-title text-secondary"> {{ program.title }} | Saison {{ episode.season.number }} </h3>
            <h5 class="card-subtitle mb-2 text-secondary"> Episode n°{{ episode.number }} :
                "{{ episode.title }}"</h5> <br>
            <p class="card-text">Synopsis : {{ episode.synopsis }}</p> <br>
            <a class="card-link" href="{{ path('show_season', {'id': season.id}) }}"> La
                saison {{ episode.season.number }}</a>
            <a class="card-link" href="{{ path('wild_show', {'slug': program.title|replace({' ':'-'})|lower}) }}"> La
                série</a>
            <a class="card-link" href="{{ path('app_index') }}">
                Retour à l'accueil
            </a>
        </div>
    </div>
    <br>

    {% if app.user %}
        <h4 class="text-center">Laisser un commentaire sur "{{ episode.title }}":</h4>
        {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}
        <div>
            {{ form_errors(form) }}
        </div>
        <div class="comment">
            {{ form_row(form.comment, {'label': 'Comment'}) }}
            {{ form_row(form.rate, {'label': 'Rate'}) }}
        </div>
        <button class="btn">{{ button_label|default('Send') }}</button>
        {{ form_end(form) }}
    {% endif %}

<div class="card bg-transparent">
    <div class="card-body">
    <h4>Tous les commentaires sur "{{ episode.title }}" :</h4>
    {% for item in episode.comments %}
        <p class="author">Author : {{ item.author }}</p>
        <p class="comment">Comment : " {{ item.comment }} "</p>
        <p class="rate">Rate : {{ item.rate }}</p><br>
    {% endfor %}
    <div>
        <a class="card-link" href="{{ path('episode_index') }}">Retour à l'index des épisodes</a>
        <a class="card-link" href="{{ path('episode_edit', {'slug': episode.slug}) }}">Modifier</a>
        <a class="card-link" href="{{ path('episode_delete', {'id': episode.id}) }}">Supprimer</a>
    </div>
    </div>
</div>

{% endblock %}
